Misc language server improvements. (#7569)
eb7f3357a1c316bad51cf0bfaea27d81a93f96ad
