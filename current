Add check for the variable requirement (#6677)
da5cf478c6be06c9e6c20917a7d472cbdcb624e3
