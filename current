Fix default->case fallthrough and add HLSL output tests (#9677)
94c09c5276cdbb5c972ea617080eac55397bb4c9
