Generalize serialization system used for AST (#7126)
9059093bc764e901a9c4aaeb12471bf32028874f
