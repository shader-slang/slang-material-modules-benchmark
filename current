Fix #5354, change diagnostic definition error message and expect output in test (#6067)
971996b397711016d47fe961890d7001338c6f23
